<!DOCTYPE html>
<html class="x-admin-sm" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>学生添加</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi"/>
    <link rel="stylesheet" th:href="@{/css/font.css}">
    <link rel="stylesheet" th:href="@{/css/xadmin.css}">
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <script th:src="@{/lib/layui/layui.js}" charset="utf-8"></script>
    <script type="text/javascript" th:src="@{/js/xadmin.js}"></script>
    <script type="text/javascript" th:src="@{/js/xcity.js}"></script>
    <!-- 让IE8/9支持媒体查询，从而兼容栅格 -->
    <!--[if lt IE 9]>
    <script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
    <script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
<div class="layui-fluid">
    <div class="layui-row">
        <form class="layui-form" th:each="examination : ${examination}">
            <input type="hidden" name="id" lay-verify="required"
                   autocomplete="off" class="layui-input" th:value="${examination.id}" readonly>
            <div class="layui-form-item">
                <label class="layui-form-label">学号</label>
                <div class="layui-input-inline">
                    <input type="text" name="stu_id" lay-verify="required"
                           autocomplete="off" class="layui-input" th:value="${examination.stu_id}" readonly>
                </div>

                <label class="layui-form-label">姓名</label>
                <div class="layui-input-inline">
                    <input type="text" name="name" lay-verify="required"
                           autocomplete="off" class="layui-input" th:value="${examination.name}" readonly>
                </div>
            </div>


            <div class="layui-form-item">
                <label class="layui-form-label">身高</label>
                <div class="layui-input-inline">
                    <input type="text" name="height" lay-verify="required" lay-reqtext="必填项不能为空"
                           autocomplete="off" class="layui-input" th:value="${examination.height}">
                </div>
                <label class="layui-form-label">体重</label>
                <div class="layui-input-inline">
                    <input type="text" name="weight" lay-verify="required" lay-reqtext="必填项不能为空"
                           autocomplete="off" class="layui-input" th:value="${examination.weight}">
                </div>
            </div>


            <div class="layui-form-item">
                <label class="layui-form-label">嗅觉</label>
                <div class="layui-input-inline">
                    <input type="text" name="nose" lay-verify="required" lay-reqtext="必填项不能为空"
                           autocomplete="off" class="layui-input" th:value="${examination.nose}">
                </div>
                <label class="layui-form-label">鼻窦疾病</label>
                <div class="layui-input-inline">
                    <input type="text" name="noseDiseases" lay-verify="required" lay-reqtext="必填项不能为空"
                           autocomplete="off" class="layui-input" th:value="${examination.noseDiseases}">
                </div>
            </div>

            <div class="layui-form-item">
                <label class="layui-form-label">门齿</label>
                <div class="layui-input-inline">
                    <input type="text" name="tooth" lay-verify="required" lay-reqtext="必填项不能为空"
                           autocomplete="off" class="layui-input" th:value="${examination.tooth}">
                </div>
                <label class="layui-form-label">口吃</label>
                <div class="layui-input-inline">
                    <input type="text" name="stuttering" lay-verify="required" lay-reqtext="必填项不能为空"
                           autocomplete="off" class="layui-input" th:value="${examination.stuttering}">
                </div>
            </div>

            <div class="layui-form-item">
                <label class="layui-form-label">血压</label>
                <div class="layui-input-inline">
                    <input type="text" name="bloodPressure" lay-verify="required" lay-reqtext="必填项不能为空"
                           autocomplete="off" class="layui-input" th:value="${examination.bloodPressure}">
                </div>
                <label class="layui-form-label">心率</label>
                <div class="layui-input-inline">
                    <input type="text" name="heartRate" lay-verify="required" lay-reqtext="必填项不能为空"
                           autocomplete="off" class="layui-input" th:value="${examination.heartRate}">
                </div>

                <label class="layui-form-label">肝功能</label>
                <div class="layui-input-inline">
                    <input type="text" name="liver" lay-verify="required" lay-reqtext="必填项不能为空"
                           autocomplete="off" class="layui-input" th:value="${examination.liver}">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">左眼视力</label>
                <div class="layui-input-inline">
                    <input type="text" name="eyeLeft" lay-verify="required" lay-reqtext="必填项不能为空"
                           autocomplete="off" class="layui-input" th:value="${examination.eyeLeft}">
                </div>
                <label class="layui-form-label">右眼视力</label>
                <div class="layui-input-inline">
                    <input type="text" name="eyeRight" lay-verify="required" lay-reqtext="必填项不能为空"
                           autocomplete="off" class="layui-input" th:value="${examination.eyeRight}">
                </div>
                <label class="layui-form-label">有无眼疾</label>
                <div class="layui-input-inline">
                    <input type="text" name="eyeDiseases" lay-verify="required" lay-reqtext="必填项不能为空"
                           autocomplete="off" class="layui-input" th:value="${examination.eyeDiseases}">
                </div>
            </div>


            <div class="layui-form-item">
                <label class="layui-form-label">
                </label>
                <button class="layui-btn" lay-filter="add" lay-submit="">
                    确定录入
                </button>
            </div>

        </form>
    </div>
</div>
<script>layui.use(['form', 'layer', 'jquery'],
    function () {
        $ = layui.jquery;
        var form = layui.form,
            layer = layui.layer;


        //监听提交
        form.on('submit(add)',
            function () {
                var id = $("input[name='id']").val();
                var stu_id = $("input[name='stu_id']").val();
                var name = $("input[name='name']").val();
                var height = $("input[name='height']").val();
                var weight = $("input[name='weight']").val();
                var nose = $("input[name='nose']").val();
                var noseDiseases = $("input[name='noseDiseases']").val();
                var tooth = $("input[name='tooth']").val();
                var stuttering = $("input[name='stuttering']").val();
                var bloodPressure = $("input[name='bloodPressure']").val();
                var heartRate = $("input[name='heartRate']").val();
                var liver = $("input[name='liver']").val();
                var eyeLeft = $("input[name='eyeLeft']").val();
                var eyeRight = $("input[name='eyeRight']").val();
                var eyeDiseases = $("input[name='eyeDiseases']").val();


                var examination = new Object();
                examination["id"] = id;
                examination["stu_id"] = stu_id;
                examination["name"] = name;
                examination["height"] = height;
                examination["weight"] = weight;
                examination["nose"] = nose;
                examination["noseDiseases"] = noseDiseases;
                examination["tooth"] = tooth;
                examination["stuttering"] = stuttering;
                examination["bloodPressure"] = bloodPressure;
                examination["heartRate"] = heartRate;
                examination["liver"] = liver;
                examination["eyeLeft"] = eyeLeft;
                examination["eyeRight"] = eyeRight;
                examination["eyeDiseases"] = eyeDiseases;

                $.ajax({
                    url: "/examination/update/deal",
                    data: JSON.stringify(examination),
                    type: "post",
                    contentType: "application/json;charset=UTF-8",
                    dataType: "json",
                    success: function (data) {
                        layer.msg(data.msg, {icon: 6, time: 500}, function () {
                            //重新加载当前页面
                            location.reload();
                        });
                    },
                    error: function (data) {
                        layer.msg(data.msg, {icon: 5, time: 500}, function () {
                            //重新加载当前页面
                            location.reload();
                        });
                    }
                });
                return false;//没有这个会跳转网页和其他问题。
            });

    });</script>
</body>

</html>